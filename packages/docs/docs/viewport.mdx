---
sidebar_position: 4
---

import { viz } from 'vizcraft';
import CodePreview from '../src/components/CodePreview';
import VizMount from '../src/components/VizMount';

# Viewport & Pan/Zoom

As your diagrams grow larger, a fixed-size SVG isn't always enough to comfortably display all content. VizCraft includes a built-in pan & zoom viewport controller to make exploring large scenes intuitive.

## Enabling Pan & Zoom

You can enable interactive pan and zoom across the `VizScene` by passing the `panZoom: true` flag in the mounting options.

When `panZoom` is activated, interactions work out-of-the-box:
- **Scroll wheel / trackpad** to zoom in and out.
- **Click and drag** on empty background space to pan the diagram.
- **Double click** on empty background space to auto-fit the scene to the viewport.

<CodePreview>
  <VizMount
    className="border border-solid border-gray-200 dark:border-gray-800 rounded-lg shadow-sm"
    style={{ height: '400px', cursor: 'grab', overflow: 'hidden' }}
    panZoom={true}
    builder={
      viz()
        .view(800, 600)
        
        // Background node
        .node('bg', { rect: { w: 600, h: 400, rx: 20 }, at: { x: 400, y: 300 }, fill: 'var(--ifm-color-emphasis-100)', stroke: { color: 'var(--ifm-color-emphasis-300)', width: 2 }})
        
        // Define some colorful shapes spread out in the canvas
        .node('a', { circle: { r: 40 }, at: { x: 200, y: 200 }, fill: '#f6c177', label: 'Start' })
        .node('b', { diamond: { w: 100, h: 80 }, at: { x: 600, y: 200 }, fill: '#cba6f7', label: 'Decision' })
        .node('c', { cylinder: { w: 80, h: 100 }, at: { x: 200, y: 400 }, fill: '#9ccfd8', label: 'Data' })
        .node('d', { star: { points: 5, outerR: 45, innerR: 20 }, at: { x: 600, y: 400 }, fill: '#eb6f92', label: 'Finish' })
        
        .node('center', { hexagon: { r: 50 }, at: { x: 400, y: 300 }, fill: '#ebbcba', label: 'Hub' })
        
        // Connect them together
        .edge('a', 'center', { stroke: { color: '#666', width: 2 }, arrow: true })
        .edge('center', 'b', { stroke: { color: '#666', width: 2 }, arrow: true })
        .edge('center', 'c', { stroke: { color: '#666', width: 2 }, arrow: true, dash: 'dashed' })
        .edge('c', 'd', { stroke: { color: '#666', width: 2 }, arrow: true, routing: 'orthogonal' })
        .edge('b', 'd', { stroke: { color: '#666', width: 2 }, arrow: true })
        
        // Extra nodes way off to show we can zoom out
        .node('far', { cloud: { w: 100, h: 60 }, at: { x: 1000, y: -100 }, fill: '#31748f', label: 'Cloud' })
        .edge('b', 'far', { stroke: { color: '#666', width: 2 }, arrow: true, dash: 'dotted' })
    }
  />
</CodePreview>

```ts
import { viz } from 'vizcraft';

const scene = viz()
  .view(800, 600)
  .node('a', { circle: { r: 40 }, at: { x: 200, y: 200 }, fill: '#f6c177' })
  .node('b', { diamond: { w: 100, h: 80 }, at: { x: 600, y: 200 }, fill: '#cba6f7' })
  .edge('a', 'b', { arrow: true });

// Enable interactive panning and zooming
const controller = scene.mount(document.getElementById('viz'), { 
  panZoom: true,
  minZoom: 0.1,    // default
  maxZoom: 5,      // default
  initialZoom: 'fit' // default
});
```

## Programmatic Control

When you mount a scene with `panZoom: true`, an initialized `PanZoomController` is returned. You can use this controller to implement external minimatrix navigation, target specific graph nodes, or reset views programmatically.

```ts
// Fit all elements neatly in the view
controller.fitToContent(padding = 20);

// Zoom and center directly onto a specific node ID
controller.zoomToNode('user-node');

// Manually assign offset and scale factors
controller.setZoom(2.5); // 250% zoom
controller.setPan({ x: -100, y: -50 });

// Reset the view to its initial zoom specifications
controller.reset();

// Subscribe to viewport modifications
const unsubscribe = controller.onChange(({ zoom, pan }) => {
  console.log('Scale:', zoom, 'Translation:', pan);
});
```
