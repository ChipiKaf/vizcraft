---
sidebar_position: 3
title: Essentials
---

import CodePreview from '@site/src/components/CodePreview';
import VizMount from '@site/src/components/VizMount';
import { viz } from 'vizcraft';

export const gridBuilder = viz().view(500, 300);
export const gridScene = gridBuilder
  .grid(5, 3, { x: 20, y: 20 })
  .node('n1')
  .cell(0, 0)
  .label('0,0')
  .rect(60, 40)
  .node('n2')
  .cell(2, 1)
  .label('2,1')
  .circle(30)
  .node('n3')
  .cell(4, 2)
  .label('4,2')
  .diamond(60, 60)
  .done();

export const edgesBuilder = viz().view(500, 200);
export const edgesScene = edgesBuilder
  .node('A')
  .at(50, 100)
  .circle(26)
  .label('Start')
  .node('B')
  .at(450, 100)
  .rect(80, 40)
  .label('End')
  .edge('A', 'B')
  .arrow()
  .label('Connects to')
  .done();

export const shapesScene = viz()
  .view(700, 960)
  .node('circ')
  .at(60, 80)
  .circle(30)
  .fill('#89b4fa')
  .label('circle')
  .node('rec')
  .at(180, 80)
  .rect(80, 50, 8)
  .fill('#a6e3a1')
  .label('rect')
  .node('dia')
  .at(310, 80)
  .diamond(70, 70)
  .fill('#f9e2af')
  .label('diamond')
  .node('cyl')
  .at(450, 80)
  .cylinder(80, 60)
  .fill('#fab387')
  .label('cylinder')
  .node('hex')
  .at(100, 210)
  .hexagon(40)
  .fill('#cba6f7')
  .label('hexagon')
  .node('hexf')
  .at(240, 210)
  .hexagon(40, 'flat')
  .fill('#f5c2e7')
  .label('hex (flat)')
  .node('ell')
  .at(410, 210)
  .ellipse(65, 35)
  .fill('#89dceb')
  .label('ellipse')
  .node('pie')
  .at(140, 330)
  .arc(40, 180, 360)
  .fill('#f38ba8')
  .label('arc (half)', { dy: 50 })
  .node('quarter')
  .at(320, 330)
  .arc(40, 0, 90)
  .fill('#fab387')
  .label('arc (quarter)', { dy: 50 })
  .node('open')
  .at(510, 330)
  .arc(40, 45, 315, false)
  .fill('none')
  .stroke('#a6e3a1', 3)
  .label('arc (open)', { dy: 50 })
  .node('ba')
  .at(590, 210)
  .blockArrow(90, 20, 40, 25)
  .fill('#94e2d5')
  .label('block arrow')
  .node('co')
  .at(140, 460)
  .callout(120, 60, { rx: 8 })
  .fill('#f9e2af')
  .label('callout')
  .node('coL')
  .at(350, 460)
  .callout(120, 60, { rx: 8, pointerSide: 'left' })
  .fill('#cba6f7')
  .label('callout (left)')
  .node('cld')
  .at(560, 460)
  .cloud(120, 70)
  .fill('#b4befe')
  .stroke('#585b70', 2)
  .label('cloud')
  .node('crs')
  .at(140, 570)
  .cross(50, 18)
  .fill('#a6e3a1')
  .label('cross')
  .node('cub')
  .at(350, 570)
  .cube(80, 60, 20)
  .fill('#89b4fa')
  .label('cube')
  .node('doc')
  .at(560, 570)
  .document(100, 70)
  .fill('#f9e2af')
  .label('document')
  .node('nt')
  .at(350, 680)
  .note(110, 70)
  .fill('#94e2d5')
  .label('note')
  .node('pth')
  .at(560, 680)
  .path('M 50,0 L 100,38 L 81,100 L 19,100 L 0,38 Z', 100, 100)
  .fill('#f5c2e7')
  .label('path (pentagon)')
  .node('par')
  .at(140, 790)
  .parallelogram(120, 55)
  .fill('#cba6f7')
  .label('parallelogram')
  .node('str')
  .at(350, 790)
  .star(5, 40)
  .fill('#f9e2af')
  .label('star')
  .node('trp')
  .at(560, 790)
  .trapezoid(80, 120, 55)
  .fill('#fab387')
  .label('trapezoid')
  .node('tri')
  .at(140, 900)
  .triangle(80, 70)
  .fill('#f38ba8')
  .label('triangle')
  .done();

Learn the basics of creating scenes with VizCraft.

## The Builder API

VizCraft uses a fluent builder pattern to construct your scene. The entry point is the \`viz()\` function.

```typescript
import { viz } from 'vizcraft';

const builder = viz().view(800, 600); // Set viewBox
builder.node('a').at(100, 100).circle(24).done(); // Add a node
const scene = builder.build(); // Finalize scene
```

### View & Grid

You can define the canvas size with \`.view(w, h)\` and optionally set up a grid for easy positioning.

<CodePreview code={`
import { viz } from 'vizcraft';

const builder = viz().view(500, 300);

builder
.grid(5, 3, { x: 20, y: 20 }) // 5 cols, 3 rows, 20px padding
.node('n1').cell(0, 0).label('0,0').rect(60, 40)
.node('n2').cell(2, 1).label('2,1').circle(30)
.node('n3').cell(4, 2).label('4,2').diamond(60, 60).done();

const container = document.getElementById('viz-grid');
if (container) builder.mount(container);
`}>

  <VizMount
    builder={gridScene}
    style={{ height: '300px', width: '100%', border: '1px solid #ccc' }}
  />
</CodePreview>

## Nodes

Nodes are the primary entities in your graph. You can create them with \`.node(id)\`.

### Shapes

VizCraft supports eighteen built-in shapes plus a generic custom-path escape hatch:

- `.circle(r)` — circle with radius `r`
- `.rect(w, h, [rx])` — rectangle with optional corner radius
- `.diamond(w, h)` — diamond / rhombus
- `.cylinder(w, h, [arcHeight])` — cylinder (the standard database / data-store symbol). `arcHeight` controls the top ellipse arc height (defaults to ~15 % of `h`)
- `.hexagon(r, [orientation])` — regular hexagon with outer radius `r`. `orientation` is `'pointy'` (default, vertex at top) or `'flat'` (flat edge at top)
- `.ellipse(rx, ry)` — ellipse / oval with independent horizontal and vertical radii
- `.arc(r, startAngle, endAngle, [closed])` — arc / pie slice. Angles in degrees (0 = right, 90 = bottom). Defaults to a closed pie; pass `false` for an open arc
- `.blockArrow(length, bodyWidth, headWidth, headLength, [direction])` — thick directional arrow polygon. `direction` is `'right'` (default), `'left'`, `'up'`, or `'down'`
- `.callout(w, h, [opts])` — speech bubble / callout. A rounded rectangle body with a triangular pointer. Options: `rx` (corner radius), `pointerSide` (`'bottom'` default, `'top'`, `'left'`, `'right'`), `pointerHeight`, `pointerWidth`, `pointerPosition` (0–1, default 0.3)
- `.cloud(w, h)` — cloud / thought bubble. A bumpy outline built from cubic Bézier curves, sized to fit within the `w × h` bounding box. Commonly used for external systems, the internet, or cloud services
- `.cross(size, [barWidth])` — cross / plus sign. A 12-vertex polygon. `barWidth` defaults to ~33 % of `size`
- `.cube(w, h, [depth])` — 3D isometric cube / box. Three polygons (front face, top face, right face) with automatic shading for the 3D effect. `depth` (isometric projection offset) defaults to ~20 % of `w`
- `.document(w, h, [waveHeight])` — document (wavy bottom). The standard flowchart document symbol — a rectangle with a sine-wave-like curved bottom edge. `waveHeight` (the wave amplitude) defaults to ~10 % of `h`
- `.note(w, h, [foldSize])` — note (folded corner). The standard UML note / annotation symbol — a rectangle with a dog-eared top-right corner. The fold triangle is rendered with a slightly darker shade. `foldSize` defaults to `15`
- `.parallelogram(w, h, [skew])` — parallelogram (skewed rectangle). The standard ISO 5807 Input/Output symbol. The top edge is shifted right by `skew` (defaults to ~20 % of `w`)
- `.star(points, outerR, [innerR])` — multi-pointed star. `points` is the number of tips, `outerR` the tip radius, `innerR` the valley radius (defaults to ~40 % of `outerR`). Great for ratings, badges, or decorative markers
- `.trapezoid(topW, bottomW, h)` — trapezoid. A quadrilateral with a shorter top edge (`topW`) and a longer bottom edge (`bottomW`). The standard ISO 5807 Manual Operation symbol. Swap `topW` / `bottomW` for an inverted trapezoid (Manual Input)
- `.triangle(w, h, [direction])` — triangle. A 3-vertex polygon with base `w` and height `h`. `direction` is `'up'` (default), `'down'`, `'left'`, or `'right'` — controls which way the apex points. Useful for warnings, data-flow symbols, and hierarchy diagrams
- `.path(d, w, h)` — **custom SVG path** (escape hatch). Supply any SVG path data string as `d`; `w` and `h` define the bounding box used for anchor computation and label centering. The path is translated so the bounding box center aligns with the node position

<CodePreview code={`
import { viz } from 'vizcraft';

const builder = viz().view(700, 960);

builder
.node('circ').at(60, 80).circle(30).fill('#89b4fa').label('circle')
.node('rec').at(180, 80).rect(80, 50, 8).fill('#a6e3a1').label('rect')
.node('dia').at(310, 80).diamond(70, 70).fill('#f9e2af').label('diamond')
.node('cyl').at(450, 80).cylinder(80, 60).fill('#fab387').label('cylinder')
.node('hex').at(100, 210).hexagon(40).fill('#cba6f7').label('hexagon')
.node('hexf').at(240, 210).hexagon(40, 'flat').fill('#f5c2e7').label('hex (flat)')
.node('ell').at(410, 210).ellipse(65, 35).fill('#89dceb').label('ellipse')
.node('pie').at(140, 330).arc(40, 180, 360).fill('#f38ba8').label('arc (half)', { dy: 50 })
.node('quarter').at(320, 330).arc(40, 0, 90).fill('#fab387').label('arc (quarter)', { dy: 50 })
.node('open').at(510, 330).arc(40, 45, 315, false).fill('none').stroke('#a6e3a1', 3).label('arc (open)', { dy: 50 })
.node('ba').at(590, 210).blockArrow(90, 20, 40, 25).fill('#94e2d5').label('block arrow')
.node('co').at(140, 460).callout(120, 60, { rx: 8 }).fill('#f9e2af').label('callout')
.node('coL').at(350, 460).callout(120, 60, { rx: 8, pointerSide: 'left' }).fill('#cba6f7').label('callout (left)')
.node('cld').at(560, 460).cloud(120, 70).fill('#b4befe').stroke('#585b70', 2).label('cloud')
.node('crs').at(140, 570).cross(50, 18).fill('#a6e3a1').label('cross')
.node('cub').at(350, 570).cube(80, 60, 20).fill('#89b4fa').label('cube')
.node('doc').at(560, 570).document(100, 70).fill('#f9e2af').label('document')
.node('nt').at(350, 680).note(110, 70).fill('#94e2d5').label('note')
.node('pth').at(560, 680).path('M 50,0 L 100,38 L 81,100 L 19,100 L 0,38 Z', 100, 100).fill('#f5c2e7').label('path (pentagon)')
.node('par').at(140, 790).parallelogram(120, 55).fill('#cba6f7').label('parallelogram')
.node('str').at(350, 790).star(5, 40).fill('#f9e2af').label('star')
.node('trp').at(560, 790).trapezoid(80, 120, 55).fill('#fab387').label('trapezoid')
.node('tri').at(140, 900).triangle(80, 70).fill('#f38ba8').label('triangle')
.done();

const container = document.getElementById('viz-shapes');
if (container) builder.mount(container);
`}>

  <VizMount
    builder={shapesScene}
    style={{ height: '920px', width: '100%', border: '1px solid #ccc' }}
  />
</CodePreview>

### Positioning

- \`.at(x, y)\`: Absolute positioning.
- \`.cell(col, row, [align])\` Grid-based positioning (requires \`.grid()\`).

## Edges

Edges connect two nodes using \`.edge(fromId, toId)\`.
By default, edges stop at the node boundary. Use \`.connect('center')\` to draw center-to-center.

<CodePreview code={`
import { viz } from 'vizcraft';

const builder = viz().view(500, 200);

builder
.node('A')
.at(50, 100)
.circle(26)
.label('Start')
.node('B')
.at(450, 100)
.rect(80, 40)
.label('End')
.edge('A', 'B')
.arrow()
.label('Connects to')
.done();

const container = document.getElementById('viz-edges');
if (container) builder.mount(container);
`}>

  <VizMount builder={edgesScene} style={{ height: '200px', width: '100%' }} />
</CodePreview>

### Edge Routing

Edges support three routing modes: **straight** (default), **curved** (smooth bezier), and **orthogonal** (right-angle elbows).
All edges are rendered as `<path>` elements. Use `.curved()`, `.orthogonal()`, or `.routing(mode)` to set the mode,
and `.via(x, y)` to add intermediate waypoints.

export const edgeRoutingScene = viz()
  .view(600, 260)
  .node('a1')
  .at(50, 60)
  .circle(22)
  .label('A')
  .node('b1')
  .at(250, 60)
  .circle(22)
  .label('B')
  .edge('a1', 'b1')
  .arrow()
  .label('straight')
  .node('a2')
  .at(50, 140)
  .circle(22)
  .label('C')
  .node('b2')
  .at(250, 140)
  .circle(22)
  .label('D')
  .edge('a2', 'b2')
  .curved()
  .arrow()
  .label('curved')
  .node('a3')
  .at(50, 220)
  .circle(22)
  .label('E')
  .node('b3')
  .at(250, 220)
  .circle(22)
  .label('F')
  .edge('a3', 'b3')
  .orthogonal()
  .arrow()
  .label('orthogonal')
  .node('c1')
  .at(370, 60)
  .circle(22)
  .label('G')
  .node('d1')
  .at(560, 220)
  .circle(22)
  .label('H')
  .edge('c1', 'd1')
  .curved()
  .via(460, 60)
  .arrow()
  .label('waypoint')
  .done();

<CodePreview code={`
import { viz } from 'vizcraft';

const builder = viz().view(600, 260);

builder
.node('a1').at(50, 60).circle(22).label('A')
.node('b1').at(250, 60).circle(22).label('B')
.edge('a1', 'b1').arrow().label('straight')
// Curved edge
.node('a2').at(50, 140).circle(22).label('C')
.node('b2').at(250, 140).circle(22).label('D')
.edge('a2', 'b2').curved().arrow().label('curved')
// Orthogonal edge
.node('a3').at(50, 220).circle(22).label('E')
.node('b3').at(250, 220).circle(22).label('F')
.edge('a3', 'b3').orthogonal().arrow().label('orthogonal')
// Curved with waypoint
.node('c1').at(370, 60).circle(22).label('G')
.node('d1').at(560, 220).circle(22).label('H')
.edge('c1', 'd1').curved().via(460, 60).arrow().label('waypoint')
.done();

const el = document.getElementById('viz-edge-routing');
if (el) builder.mount(el);
`}>

  <VizMount builder={edgeRoutingScene} style={{ height: '260px', width: '100%' }} />
</CodePreview>

| Builder method   | Effect                                                                               |
| ---------------- | ------------------------------------------------------------------------------------ |
| `.straight()`    | Straight line routing (default).                                                     |
| `.curved()`      | Smooth bezier curve.                                                                 |
| `.orthogonal()`  | Right-angle (elbow) connectors.                                                      |
| `.routing(mode)` | Set routing mode programmatically (`'straight'`, `'curved'`, or `'orthogonal'`).     |
| `.via(x, y)`     | Add an intermediate waypoint. Chain multiple `.via()` calls for multi-segment paths. |

### Edge Labels

Use `.label(text)` to add a text label at the midpoint of an edge. Chain multiple `.label()` calls with a `position` option to place labels at **start**, **mid**, or **end** — useful for ER-diagram cardinalities, protocol annotations, or any edge that needs more than one label.

| Position   | Placement                              |
| ---------- | -------------------------------------- |
| `'start'`  | ~15 % from the source node.            |
| `'mid'`    | Midpoint of the path (default).        |
| `'end'`    | ~85 % toward the target node.          |

export const edgeLabelScene = viz()
  .view(600, 220)
  .node('users')
  .at(80, 110)
  .rect(100, 50)
  .label('Users')
  .node('orders')
  .at(340, 60)
  .rect(100, 50)
  .label('Orders')
  .node('products')
  .at(340, 170)
  .rect(100, 50)
  .label('Products')
  .edge('users', 'orders')
  .label('1', { position: 'start' })
  .label('places', { position: 'mid' })
  .label('*', { position: 'end' })
  .arrow()
  .edge('orders', 'products')
  .curved()
  .label('*', { position: 'start' })
  .label('contains', { position: 'mid' })
  .label('*', { position: 'end' })
  .arrow()
  .done();

<CodePreview code={`
import { viz } from 'vizcraft';

const builder = viz().view(600, 220);

builder
.node('users').at(80, 110).rect(100, 50).label('Users')
.node('orders').at(340, 60).rect(100, 50).label('Orders')
.node('products').at(340, 170).rect(100, 50).label('Products')
// ER-style: 1 user places * orders
.edge('users', 'orders')
  .label('1', { position: 'start' })
  .label('places', { position: 'mid' })
  .label('*', { position: 'end' })
  .arrow()
// * orders contain * products (curved)
.edge('orders', 'products')
  .curved()
  .label('*', { position: 'start' })
  .label('contains', { position: 'mid' })
  .label('*', { position: 'end' })
  .arrow()
.done();

const el = document.getElementById('viz-edge-labels');
if (el) builder.mount(el);
`}>

  <VizMount builder={edgeLabelScene} style={{ height: '220px', width: '100%' }} />
</CodePreview>

| Builder method        | Effect                                                                                                                  |
| --------------------- | ----------------------------------------------------------------------------------------------------------------------- |
| `.label(text)`        | Add a label at the midpoint (default position `'mid'`).                                                                 |
| `.label(text, opts?)` | Add a label with options. `opts.position` can be `'start'`, `'mid'`, or `'end'`. `opts.className`, `opts.dx`, `opts.dy` are also available. |

:::tip
You can chain `.label()` as many times as you like — each call adds an additional label. The `dy` default of `-10` places text slightly above the path.
:::

### Edge Styling

Like nodes, edges can be styled **per-edge** via the builder using `.stroke()`, `.fill()`, and `.opacity()`.
When set, these produce inline SVG attributes that override the CSS defaults (`.viz-edge { fill: none; stroke: currentColor }`).
If no style is set, the CSS class defaults apply — so you can still theme everything via CSS.

export const edgeStyleScene = viz()
  .view(600, 220)
  .node('a1')
  .at(50, 60)
  .circle(22)
  .label('A')
  .node('b1')
  .at(250, 60)
  .circle(22)
  .label('B')
  .edge('a1', 'b1')
  .stroke('#e74c3c', 3)
  .arrow()
  .label('red 3px')
  .node('a2')
  .at(50, 140)
  .circle(22)
  .label('C')
  .node('b2')
  .at(250, 140)
  .circle(22)
  .label('D')
  .edge('a2', 'b2')
  .stroke('#2ecc71', 2)
  .opacity(0.6)
  .arrow()
  .label('green 60%')
  .node('c1')
  .at(370, 60)
  .circle(22)
  .label('E')
  .node('d1')
  .at(560, 140)
  .circle(22)
  .label('F')
  .edge('c1', 'd1')
  .curved()
  .stroke('#3498db', 4)
  .arrow()
  .label('blue curved')
  .done();

<CodePreview code={`
import { viz } from 'vizcraft';

const builder = viz().view(600, 220);

builder
.node('a1').at(50, 60).circle(22).label('A')
.node('b1').at(250, 60).circle(22).label('B')
.edge('a1', 'b1').stroke('#e74c3c', 3).arrow().label('red 3px')
// Green edge at 60% opacity
.node('a2').at(50, 140).circle(22).label('C')
.node('b2').at(250, 140).circle(22).label('D')
.edge('a2', 'b2').stroke('#2ecc71', 2).opacity(0.6).arrow().label('green 60%')
// Blue curved edge
.node('c1').at(370, 60).circle(22).label('E')
.node('d1').at(560, 140).circle(22).label('F')
.edge('c1', 'd1').curved().stroke('#3498db', 4).arrow().label('blue curved')
.done();

const el = document.getElementById('viz-edge-style');
if (el) builder.mount(el);
`}>

  <VizMount builder={edgeStyleScene} style={{ height: '220px', width: '100%' }} />
</CodePreview>

| Builder method           | Effect                                               |
| ------------------------ | ---------------------------------------------------- |
| `.stroke(color, width?)` | Set stroke color and optional width (overrides CSS). |
| `.fill(color)`           | Set fill color (overrides CSS default of `none`).    |
| `.opacity(value)`        | Set opacity 0–1 (overrides CSS).                     |

:::tip
You can combine per-edge styling with CSS classes. Use `.class('my-edge')` for broad theming and `.stroke()` / `.fill()` / `.opacity()` for one-off overrides.
:::

## Animations

For a full breakdown (registry/CSS animations, data-only timelines, playback controls, and live examples), see the dedicated guide:

- [Animations](./animations)

---

## Container / Group Nodes

Container nodes let you group children visually — think swimlanes, sub-processes,
or architectural boxes. Mark any node as a container with `.container()`, then
attach children with `.parent(containerId)`.

export const containerBuilder = viz().view(500, 340);
export const containerScene = containerBuilder
  .node('swim')
  .at(250, 170)
  .rect(460, 300)
  .label('Swimlane')
  .fill('#f0f4ff')
  .stroke('#4a6fa5', 2)
  .container({ headerHeight: 36 })
  .node('step1')
  .at(150, 220)
  .rect(100, 50)
  .label('Step 1')
  .parent('swim')
  .node('step2')
  .at(350, 220)
  .rect(100, 50)
  .label('Step 2')
  .parent('swim')
  .edge('step1', 'step2')
  .arrow()
  .done();

<CodePreview code={`
import { viz } from 'vizcraft';

const builder = viz().view(500, 340);

builder
.node('swim')
.at(250, 170)
.rect(460, 300)
.label('Swimlane')
.fill('#f0f4ff')
.stroke('#4a6fa5', 2)
.container({ headerHeight: 36 })
.node('step1')
.at(150, 220)
.rect(100, 50)
.label('Step 1')
.parent('swim')
.node('step2')
.at(350, 220)
.rect(100, 50)
.label('Step 2')
.parent('swim')
.edge('step1', 'step2')
.arrow()
.done();

const el = document.getElementById('viz-container');
if (el) builder.mount(el);
`}>

  <VizMount builder={containerScene} style={{ height: '340px', width: '100%' }} />
</CodePreview>

### How it works

| Builder method        | Effect                                                                        |
| --------------------- | ----------------------------------------------------------------------------- |
| `.container(config?)` | Marks the current node as a container. Accepts an optional `ContainerConfig`. |
| `.parent(id)`         | Makes the current node a child of the container with the given id.            |

**`ContainerConfig` options:**

- `layout` — `'free'` (default), `'vertical'`, or `'horizontal'`.
- `padding` — `{ top, right, bottom, left }` interior padding.
- `autoSize` — whether the container auto-resizes to fit children.
- `headerHeight` — height of the header band; renders a separator line and centres the container label in the header area.

Children's positions are specified in **absolute** scene coordinates. When a container moves at runtime (via `patchRuntime`), all its children are automatically offset by the same delta.

In the rendered SVG:

- Container nodes receive the `viz-container` CSS class.
- Children are nested inside a `<g class="viz-container-children">` group.
- The header line has the class `viz-container-header`.
